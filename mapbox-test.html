<!DOCTYPE html>
<html>
  <head>
    <title>Mapbox for Asurion</title>

    <script src="https://use.fontawesome.com/3f1ebc53a0.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v1.4.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v1.4.0/mapbox-gl.css' rel='stylesheet' />

    <script src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v4.0.2/mapbox-gl-directions.js'></script>
  <link rel='stylesheet' href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v4.0.2/mapbox-gl-directions.css' type='text/css' />

    <link rel="stylesheet" type="text/css" href="map-styles.css">

    
  </head>

  <body>

    
    <div id='map'></div>
    <div class="map-controls">
      <div class="map-button-container">
        <input type="radio" name="modeSwitch" value="darkMode" id="darkModeButton" class="styleSwitchButton" onclick = "darkStyle(this)">
        <label for="darkModeButton">Dark Mode
          <div class="customButton">
            <div class="interiorButton"></div>
          </div>
        </label>
      </div>
      <div class="map-button-container selected">
        <input type="radio" name="modeSwitch" value="lightMode" id="lightModeButton" class="styleSwitchButton" onclick = "lightStyle(this)">
        <label for="lightModeButton">Light Mode
          <div class="customButton">
            <div class="interiorButton"></div>
          </div>
        </label>
      </div>
      <br>
      <div class="map-button-container">
        <div class="flyToButton" onClick = "flyToCoord()">Zoom In Sterling</div>
      </div>
      <div class="map-button-container">
        <div class="flyToButton" onClick = "flyToCoordWithZoom()">Zoom Out Nashville</div>
      </div>
      <br>
    </div>  

    <script>
      mapboxgl.accessToken = 'pk.eyJ1IjoibWFkY2FybW9keSIsImEiOiJjazE4MGJvY2IwYmV5M3BwaWNoaTVreGlsIn0.dHVhh-U4SQgDxUB0ShAWbg';
      lightMapStyle = 'mapbox://styles/madcarmody/ck180lo7s012v1co308wz9u1m';
      darkMapStyle = 'mapbox://styles/madcarmody/ck181zpvs02bo1cphsdgdzik7';

      var map = new mapboxgl.Map({
          container: 'map',
          style: lightMapStyle
      });

      // initialize the map canvas to interact with later
      var canvas = map.getCanvasContainer();

      var start = [-86.773, 36.158];
      var end = [-77.435, 38.981];

      map.on('load', function() {
        // make an initial directions request that

        // Add starting point to the map
        map.addLayer({
          id: 'point',
          type: 'circle',
          source: {
            type: 'geojson',
            data: {
              type: 'FeatureCollection',
              features: [{
                type: 'Feature',
                properties: {},
                geometry: {
                  type: 'Point',
                  coordinates: start
                }
              }
              ]
            }
          },
          paint: {
            'circle-radius': 10,
            'circle-color': '#3887be'
          }
        });
        // this is where the code from the next step will go
      });


      function lightStyle(self) {
        map.setStyle(lightMapStyle);
        self.parentElement.classList.add("selected");
        document.getElementById("darkModeButton").parentElement.classList.remove("selected");
      }

      function darkStyle(self) {
        map.setStyle(darkMapStyle);
        self.parentElement.classList.toggle("selected");
        document.getElementById("lightModeButton").parentElement.classList.remove("selected");
      }

      function flyToCoord() {
        map.flyTo({
          center: [
            -77.435,
            38.981
          ],
          zoom: 10
        })
      }

      function flyToCoordWithZoom() {
        map.flyTo({
          center: [
            -86.782,
            36.163
          ],
          zoom: 7
        })
      }

      map.addControl(new MapboxDirections({
        accessToken: mapboxgl.accessToken
      }), 'top-left');
    </script>


  </body>
</html>